<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ­Øµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† - Ø§Ø®ØªØ¨Ø§Ø±</title>
</head>
<body>
    <h1>ÙØ­Øµ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠÙŠÙ†</h1>
    <div id="results"></div>
    
    <script>
        console.log("=== ÙØ­Øµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ localStorage ===");

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† localStorage
        const stored = localStorage.getItem('al_saedan_users_v1');
        let users = [];

        if (stored) {
            try {
                users = JSON.parse(stored);
                console.log(`Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø­ÙÙˆØ¸ÙŠÙ†: ${users.length}`);
                
                // ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
                const activeUsers = users.filter(u => u.status === 'active');
                const pendingUsers = users.filter(u => u.status === 'pending');
                const otherUsers = users.filter(u => u.status !== 'active' && u.status !== 'pending');
                
                console.log(`Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…ÙØ¹Ù„ÙˆÙ†: ${activeUsers.length}`);
                console.log(`Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ${pendingUsers.length}`);
                console.log(`Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¢Ø®Ø±ÙˆÙ†: ${otherUsers.length}`);
                
                // Ø·Ø¨Ø§Ø¹Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¹Ù„Ù‚ÙŠÙ†
                if (pendingUsers.length > 0) {
                    console.log("\nğŸ”¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:");
                    pendingUsers.forEach((user, index) => {
                        console.log(`${index + 1}. ${user.full_name} - ${user.email} - ${user.status}`);
                    });
                } else {
                    console.log("\nâœ… Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±");
                }
                
                // Ø·Ø¨Ø§Ø¹Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ÙØ¹Ù„ÙŠÙ†
                if (activeUsers.length > 0) {
                    console.log("\nğŸ”¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…ÙØ¹Ù„ÙˆÙ†:");
                    activeUsers.forEach((user, index) => {
                        console.log(`${index + 1}. ${user.full_name} - ${user.email} - ${user.role || 'user'}`);
                    });
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);
            }
        } else {
            console.log("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø­ÙÙˆØ¸Ø©");
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function createTestPendingUser() {
            console.log("\n=== Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ===");
            
            const testUser = {
                id: 'test_user_' + Date.now(),
                national_id: '1234567890',
                first_name: 'Ø£Ø­Ù…Ø¯',
                middle_name: 'Ø¹Ù„ÙŠ',
                last_name: 'Ø§Ù„Ø³Ø¹ÙŠØ¯Ø§Ù†',
                full_name: 'Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯Ø§Ù†',
                email: 'ahmed.test@example.com',
                phone: '0501234567',
                password: 'YWRtaW4xMjNzYWx0X2tleV8yMDI0', // password hash for 'test123'
                role: 'user',
                status: 'pending', // Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                birth_date: '1990-05-15',
                birth_place: 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                profession: 'Ù…Ù‡Ù†Ø¯Ø³',
                specialization: 'Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª',
                hobbies: 'Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŒ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©',
                father_id: null,
                generation: 3,
                created_at: new Date().toISOString(),
                approved_at: null,
                approved_by: null
            };
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ
            users.push(testUser);
            localStorage.setItem('al_saedan_users_v1', JSON.stringify(users));
            
            console.log(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ: ${testUser.full_name}`);
            console.log(`   Ø§Ù„Ø­Ø§Ù„Ø©: ${testUser.status}`);
            console.log(`   Ø§Ù„Ø¨Ø±ÙŠØ¯: ${testUser.email}`);
            
            return testUser;
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
        const testUser = createTestPendingUser();

        console.log(`\nØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${users.length} Ù…Ø³ØªØ®Ø¯Ù…`);
        console.log("ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† ÙØ­Øµ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠÙŠÙ†");
        
        document.getElementById('results').innerHTML = `
            <p>ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ: ${testUser.full_name}</p>
            <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: ${users.length}</p>
            <p>Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„</p>
        `;
    </script>
</body>
</html>